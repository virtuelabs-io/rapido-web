<div class="main-div">
  <mat-horizontal-stepper [linear]="isLinear" #stepper [selectedIndex]="stepperIndex">
    <!-- Delivery address step-->
    <mat-step [stepControl]="registerFormGroup">
      <ng-template matStepLabel>Select Delivery Address</ng-template>
      <form class="form-container">
        <div class="address-div">
          <div class="title-div">
            <h4>
              My Addresses
            </h4>
          </div>
          <div class="rapido-add-address">
            <a class="rapido-add-address-icon">
              <div class="address-add-icon">
                <a class="" (click)="newAddress()">
                  <svg aria-hidden="true" aria-haspopup="menu">
                    <use xlink:href="#add"/>
                  </svg>
                </a>
              </div>
              <div class="text-div">
                <p>Add Address</p>
              </div>
              <div class="spinner-div">
                <mat-spinner strokeWidth="4" [diameter]="50" *ngIf="showSpinner"></mat-spinner>
              </div>
            </a>
            <div class="rapido-add-address-item" *ngFor="let address of address">
              <div class="address-text">
                <strong> {{ address.full_name }} </strong>
                <br/><p>{{ address.addr_1 }}
                <br/> {{ address.addr_2 }}
                <br/> {{ address.city }} 
                <br/> {{ address.county }}, {{ address.postcode }}
                <br/> {{ address.country }}
              </div>
              <div class="card-actions">
                <button mat-flat-button color="primary" class="delivery-add-button" (click)="createOrder(address.id)">
                  Deliver to this Address
                </button>
              </div>
            </div>
          </div>
        </div>
      </form>          
    </mat-step>

  <!-- payment step -->
    <mat-step [stepControl]="registerFormGroup">
      <ng-template matStepLabel>Make a Payment</ng-template>
      <form>
        <div class="payment-div">
          <div class="order-address-div">
            <div class="order-div">
              <div class="title-div">
                <h4>
                  Your Orders
                </h4>
              </div>
              <div class="cart-columns">
                <div class="cart-col-price">
                  <span>Price(£)</span>
                </div>
                <div class="cart-col-quan">
                  <span>Quantity</span>
                </div>
              </div>
              <div class="order-items-main">
                  <div class="order-items">
                      <div class="order-items-list" *ngFor="let item of orderItems">
                        <div class="item-thumbnail">
                          <img class="image" src="{{ item.pic }}">
                        </div>
                        <div class="item-desc">
                          <p><strong>{{ item.title }}</strong></p>
                        </div>
                        <div class="item-price">
                          <p>
                            <strong>{{ item.unitPrice }}</strong>
                          </p>
                        </div>
                        <div class="item-quantity">
                          <span>{{ item.quantity }}</span>
                        </div>
                      </div>
                    </div>
              </div>
            </div>
            
            <div class="order-address">
              <div class="add-title-div">
                <h5 class="title-div">Delivery Address</h5>
              </div>
                <div class="address-text">
                    <strong> {{ orderAddress.full_name }} </strong>
                    <br/><p>{{ orderAddress.addr_1 }}
                    <br/> {{ orderAddress.addr_2 }}
                    <br/> {{ orderAddress.city }} 
                    <br/> {{ orderAddress.county }}, {{ orderAddress.postcode }}
                    <br/> {{ orderAddress.country }}
                  </div>
            </div>
          </div>

          <div class="pay-div">
            <h4>Card Details</h4>
            <div class="payment-det">
              <mat-form-field class="">
                <input matInput [(ngModel)]="registeredEmail" name="email" placeholder="Enter your email">
              </mat-form-field>
              <div id="card-element" class="field"></div><br>
                <button class="btn btn-primary" (click)="buy()">Pay £{{ amount }}</button>
              </div>
            </div>
          </div>
      </form>
    </mat-step>
  </mat-horizontal-stepper>
</div>